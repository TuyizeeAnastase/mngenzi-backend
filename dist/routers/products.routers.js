"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _product = _interopRequireDefault(require("../controllers/product.controller"));
var _express = _interopRequireDefault(require("express"));
var _protect = require("../middleware/protect.middleware");
var _product2 = require("../validations/product.validations");
var _category = require("../middleware/category.middleware");
var _uploading = require("../middleware/uploading.middleware");
var _product3 = require("../middleware/product.middleware");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { "default": e }; }
var router = (0, _express["default"])();
router.route('/').get(_product["default"].getProducts).post(_protect.protect, (0, _protect.restrictTo)("admin"), _product2.productValidations, _uploading.checkUploadImage, (0, _uploading.checkUploadImageFormart)("png", "jpg"), _category.checkCategoryExist, _product3.checProductDoesNotExist, _product["default"].createProduct);
router.route('/:id').patch(_protect.protect, (0, _protect.restrictTo)("admin"), _product3.checProductExistById, _product["default"].updateProduct).get(_product3.checProductExistById, _product["default"].getProduct);
var _default = exports["default"] = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcHJvZHVjdCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2V4cHJlc3MiLCJfcHJvdGVjdCIsIl9wcm9kdWN0MiIsIl9jYXRlZ29yeSIsIl91cGxvYWRpbmciLCJfcHJvZHVjdDMiLCJlIiwiX19lc01vZHVsZSIsInJvdXRlciIsImV4cHJlc3MiLCJyb3V0ZSIsImdldCIsInByb2R1Y3RDb250cm9sbGVyIiwiZ2V0UHJvZHVjdHMiLCJwb3N0IiwicHJvdGVjdCIsInJlc3RyaWN0VG8iLCJwcm9kdWN0VmFsaWRhdGlvbnMiLCJjaGVja1VwbG9hZEltYWdlIiwiY2hlY2tVcGxvYWRJbWFnZUZvcm1hcnQiLCJjaGVja0NhdGVnb3J5RXhpc3QiLCJjaGVjUHJvZHVjdERvZXNOb3RFeGlzdCIsImNyZWF0ZVByb2R1Y3QiLCJwYXRjaCIsImNoZWNQcm9kdWN0RXhpc3RCeUlkIiwidXBkYXRlUHJvZHVjdCIsImdldFByb2R1Y3QiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvcm91dGVycy9wcm9kdWN0cy5yb3V0ZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwcm9kdWN0Q29udHJvbGxlciBmcm9tIFwiLi4vY29udHJvbGxlcnMvcHJvZHVjdC5jb250cm9sbGVyXCI7XHJcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXHJcbmltcG9ydCB7IHByb3RlY3QscmVzdHJpY3RUbyB9IGZyb20gXCIuLi9taWRkbGV3YXJlL3Byb3RlY3QubWlkZGxld2FyZVwiO1xyXG5pbXBvcnQgeyBwcm9kdWN0VmFsaWRhdGlvbnMgfSBmcm9tIFwiLi4vdmFsaWRhdGlvbnMvcHJvZHVjdC52YWxpZGF0aW9uc1wiO1xyXG5pbXBvcnQgeyBjaGVja0NhdGVnb3J5RXhpc3QgfSBmcm9tIFwiLi4vbWlkZGxld2FyZS9jYXRlZ29yeS5taWRkbGV3YXJlXCI7XHJcbmltcG9ydCB7Y2hlY2tVcGxvYWRJbWFnZSxjaGVja1VwbG9hZEltYWdlRm9ybWFydH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvdXBsb2FkaW5nLm1pZGRsZXdhcmVcIlxyXG5pbXBvcnQgeyBjaGVjUHJvZHVjdERvZXNOb3RFeGlzdCxjaGVjUHJvZHVjdEV4aXN0QnlJZCB9IGZyb20gXCIuLi9taWRkbGV3YXJlL3Byb2R1Y3QubWlkZGxld2FyZVwiO1xyXG5cclxuY29uc3Qgcm91dGVyPWV4cHJlc3MoKVxyXG5cclxucm91dGVyXHJcbi5yb3V0ZSgnLycpXHJcbi5nZXQocHJvZHVjdENvbnRyb2xsZXIuZ2V0UHJvZHVjdHMpXHJcbi5wb3N0KHByb3RlY3QscmVzdHJpY3RUbyhcImFkbWluXCIpLHByb2R1Y3RWYWxpZGF0aW9ucyxjaGVja1VwbG9hZEltYWdlLGNoZWNrVXBsb2FkSW1hZ2VGb3JtYXJ0KFwicG5nXCIsXCJqcGdcIiksY2hlY2tDYXRlZ29yeUV4aXN0LGNoZWNQcm9kdWN0RG9lc05vdEV4aXN0LHByb2R1Y3RDb250cm9sbGVyLmNyZWF0ZVByb2R1Y3QpXHJcblxyXG5yb3V0ZXJcclxuLnJvdXRlKCcvOmlkJylcclxuLnBhdGNoKHByb3RlY3QscmVzdHJpY3RUbyhcImFkbWluXCIpLGNoZWNQcm9kdWN0RXhpc3RCeUlkLHByb2R1Y3RDb250cm9sbGVyLnVwZGF0ZVByb2R1Y3QpXHJcbi5nZXQoY2hlY1Byb2R1Y3RFeGlzdEJ5SWQscHJvZHVjdENvbnRyb2xsZXIuZ2V0UHJvZHVjdClcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFFBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFNBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLFVBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLFNBQUEsR0FBQU4sT0FBQTtBQUFnRyxTQUFBRCx1QkFBQVEsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLGdCQUFBQSxDQUFBO0FBRWhHLElBQU1FLE1BQU0sR0FBQyxJQUFBQyxtQkFBTyxFQUFDLENBQUM7QUFFdEJELE1BQU0sQ0FDTEUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUNWQyxHQUFHLENBQUNDLG1CQUFpQixDQUFDQyxXQUFXLENBQUMsQ0FDbENDLElBQUksQ0FBQ0MsZ0JBQU8sRUFBQyxJQUFBQyxtQkFBVSxFQUFDLE9BQU8sQ0FBQyxFQUFDQyw0QkFBa0IsRUFBQ0MsMkJBQWdCLEVBQUMsSUFBQUMsa0NBQXVCLEVBQUMsS0FBSyxFQUFDLEtBQUssQ0FBQyxFQUFDQyw0QkFBa0IsRUFBQ0MsaUNBQXVCLEVBQUNULG1CQUFpQixDQUFDVSxhQUFhLENBQUM7QUFFdExkLE1BQU0sQ0FDTEUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUNiYSxLQUFLLENBQUNSLGdCQUFPLEVBQUMsSUFBQUMsbUJBQVUsRUFBQyxPQUFPLENBQUMsRUFBQ1EsOEJBQW9CLEVBQUNaLG1CQUFpQixDQUFDYSxhQUFhLENBQUMsQ0FDdkZkLEdBQUcsQ0FBQ2EsOEJBQW9CLEVBQUNaLG1CQUFpQixDQUFDYyxVQUFVLENBQUM7QUFBQSxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsY0FFeENwQixNQUFNIiwiaWdub3JlTGlzdCI6W119